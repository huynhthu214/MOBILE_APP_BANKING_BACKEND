{
  "info": {
    "name": "Banking - Transaction API (FULL VERSION)",
    "_postman_id": "f9a1c321-12ab-45de-9f11-acde98765432",
    "description": "Full test: deposit / withdraw / transfer / cancel / retry / rollback (2-step OTP)",
    "schema": "[https://schema.getpostman.com/json/collection/v2.1.0/collection.json](https://schema.getpostman.com/json/collection/v2.1.0/collection.json)"
  },
  "item": [
    {
      "name": "List Transactions",
      "request": {
        "method": "GET",
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions"]
        }
      }
    },
    {
      "name": "Get Transaction by ID",
      "request": {
        "method": "GET",
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions/{{transaction_id}}",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions", "{{transaction_id}}"]
        }
      }
    },
    {
      "name": "DEPOSIT - Step 1 (Create)",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  'account_id': 'ACC000001',\n  'amount: 500000\n}"
        },
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions/deposit",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions", "deposit"]
        }
      }
    },
    {
      "name": "DEPOSIT - Step 2 (Confirm OTP)",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  'otp': '{{otp}}'\n}"
        },
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions/{{transaction_id}}/confirm",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions", "{{transaction_id}}", "confirm"]
        }
      }
    },
    {
      "name": "WITHDRAW - Step 1 (Create)",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  'account_id': 'ACC000001',\n  'amount': 200000\n}"
        },
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions/withdraw",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions", "withdraw"]
        }
      }
    },
    {
      "name": "WITHDRAW - Step 2 (Confirm OTP)",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  'otp': '{{otp}}'\n}"
        },
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions/{{transaction_id}}/confirm",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions", "{{transaction_id}}", "confirm"]
        }
      }
    },
    {
      "name": "TRANSFER - Step 1 (Create)",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  'source_account_id': 'ACC000001',\n  'destination_account_id': 'ACC000002',\n  'amount': 150000\n}"
        },
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions/transfer",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions", "transfer"]
        }
      }
    },
    {
      "name": "TRANSFER - Step 2 (Confirm OTP)",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  'otp': '{{otp}}'\n}"
        },
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions/{{transaction_id}}/confirm",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions", "{{transaction_id}}", "confirm"]
        }
      }
    },
    {
      "name": "CANCEL TRANSACTION (PENDING)",
      "request": {
        "method": "POST",
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions/{{transaction_id}}/cancel",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions", "{{transaction_id}}", "cancel"]
        }
      }
    },
    {
      "name": "RETRY TRANSACTION (FAILED / TIMEOUT)",
      "request": {
        "method": "POST",
        "url": {
          "raw": "http://localhost:5000/api/v1/transactions/{{transaction_id}}/retry",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "v1", "transactions", "{{transaction_id}}", "retry"]
        }
      }
    },
    {
      "name": "ADMIN - ROLLBACK TRANSACTION",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  'reason': 'Manual rollback by admin'\n}"
        },
        "url": {
          "raw": "http://localhost:5000/api/v1/admin/transactions/{{transaction_id}}/rollback",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": [
            "api",
            "v1",
            "admin",
            "transactions",
            "{{transaction_id}}",
            "rollback"
          ]
        }
      }
    }
  ]
}
